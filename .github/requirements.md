# Расширение для Firefox - Tooltip-translator.

Пользователь выделяет текст на странице,
как только закончил выделение,
рядом появляется кнопка расширения.
Когда пользователь нажимает на кнопку,
перевод отображается во всплывающем окне.
огранияение - 200 символов, если больше кнопка не появляется

---Tooltip

## Кнопка расширения:
- Кнопка появляется только если выделен непустой текст (даже если вместе с ним выделены изображения или другие элементы).
- Кнопка появляется рядом с курсором в момент окончания выделения:
    - По оси X — строго по координате курсора.
    - По оси Y — кнопка примыкает к выделенному тексту:
      - Если курсор выше центра выделенной области — кнопка появляется над выделением, примыкая к верхнему краю.
      - Если курсор ниже центра — кнопка появляется под выделением, примыкая к нижнему краю.
      - Если курсор по Y не помещается в видимой области (viewport) - кнопка сдвигается в видимую область, примыкая к верхнему или нижнему краю выделения.
    - Если курсор по X находится за пределами выделенной области, кнопка примыкает к ближайшему к курсору углу выделения (верхний/нижний, левый/правый).
- Кнопка не перекрывает выделенный текст.
- При прокрутке страницы кнопка остаётся на месте относительно содержимого (скроллится вместе со страницей).
- Кнопка исчезает при клике вне её области или по самой кнопке.
- Кнопка должна пропадать при появлении окна с переводом
- Для отображения используется иконка icon.svg размером 22x22 пикселя.

---

## Tooltip с переводом:
Tooltip с переводом должен появляться видимым во viewport,
  стремиться ближе к центру экрана примыкая к выделенному тексту,
  быть отцентрованным относительно выделенного текста по X,
  иметь стрелку (arrow/caret) направленную к тексту.
Не должен прилипать к краю viewport,
не должен перекрывать выделенный текст.
Если происходит прокрутка страницы, tooltip скроллится вместе со страницей.
При нажатии вне Tooltip, он должен исчезать.
Контент tooltip:
  ### блок с оригинальным текстом
  ### dropdown select target language
    - находится над текстом перевода
    - список доступных языков запрашивается динамически с API при первом использовании расширения и сохраняется локально для последующего использования
    - если список языков не удалось получить (например, ошибка сети или API), в tooltip отображается сообщение об ошибке: "Пожалуйста, попробуйте позже" вместо dropdown и перевода
    - по умолчанию выбран английский язык, если пользователь не выбирал другой
    - при выборе языка перевод обновляется
    - выбранный язык сохраняется для текущего пользователя и используется по умолчанию при последующих переводах, даже после перезапуска браузера
    - если ранее выбранный язык больше не доступен (например, удалён из API), происходит возврат к английскому и повторный запрос списка языков
  ### блок с переводом
